<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jersey tax residence assessment tool for individuals without prior residence status</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: white;
            min-height: 100vh;
        }
        
        .header {
            background: #C8102E;
            color: white;
            padding: 1rem 0;
        }
        
        .header-content {
            max-width: 64rem;
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        .header h1 {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .breadcrumb {
            background: #f3f4f6;
            border-bottom: 1px solid #d1d5db;
            padding: 0.75rem 0;
        }
        
        .breadcrumb-content {
            max-width: 64rem;
            margin: 0 auto;
            padding: 0 1.5rem;
            font-size: 0.875rem;
        }
        
        .breadcrumb a {
            color: #C8102E;
            text-decoration: none;
        }
        
        .container {
            max-width: 64rem;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }
        
        .intro h2 {
            font-size: 1.875rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .intro p {
            font-size: 1.125rem;
            color: #4b5563;
            margin-bottom: 2rem;
        }
        
        .card {
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 0.25rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        
        .question-box {
            background: #f9fafb;
            padding: 1.25rem;
            border-radius: 0.25rem;
            border: 1px solid #d1d5db;
            margin-bottom: 1.5rem;
        }
        
        .question-box h3 {
            font-size: 1.125rem;
            font-weight: bold;
            margin-bottom: 0.75rem;
        }
        
        .question-box p {
            font-size: 0.875rem;
            color: #4b5563;
        }
        
        .button-group {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .option-button {
            background: white;
            border: 2px solid #d1d5db;
            padding: 1rem 1.5rem;
            border-radius: 0.25rem;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
        }
        
        .option-button:hover {
            border-color: #C8102E;
            background: #fef2f2;
        }
        
        .option-button-title {
            font-weight: bold;
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }
        
        .option-button-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .result-box {
            border: 1px solid #93c5fd;
            padding: 1.5rem;
            border-radius: 0.25rem;
            margin-bottom: 1.5rem;
        }
        
        .result-box.non-resident {
            background: #d1fae5;
            border-color: #6ee7b7;
        }
        
        .result-box.resident-not-ordinarily {
            background: #fef3c7;
            border-color: #fcd34d;
        }
        
        .result-box.resident-ordinarily {
            background: #fee2e2;
            border-color: #fca5a5;
        }
        
        .result-content h3 {
            font-size: 1.125rem;
            font-weight: bold;
            margin-bottom: 0.75rem;
        }
        
        .result-status {
            background: white;
            padding: 1rem;
            border-radius: 0.25rem;
            border: 1px solid #d1d5db;
            margin-bottom: 1rem;
        }
        
        .result-status p {
            font-size: 1.25rem;
            font-weight: bold;
            color: #C8102E;
        }
        
        .result-details {
            background: #f9fafb;
            padding: 1rem;
            border-radius: 0.25rem;
            border: 1px solid #d1d5db;
        }
        
        .result-details h4 {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .result-details p {
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .result-details p:last-child {
            margin-bottom: 0;
        }
        
        .primary-button {
            width: 100%;
            background: #C8102E;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.25rem;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.2s;
        }
        
        .primary-button:hover {
            background: #a00d24;
        }
        
        .info-box {
            background: #dbeafe;
            border: 1px solid #93c5fd;
            padding: 1.5rem;
            border-radius: 0.25rem;
        }
        
        .info-box h3 {
            font-size: 1.125rem;
            font-weight: bold;
            margin-bottom: 0.75rem;
        }
        
        .info-box ul {
            list-style: none;
        }
        
        .info-box li {
            display: block;
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
        }
        
        .bullet {
            color: #C8102E;
            font-weight: bold;
            margin-right: 0.5rem;
        }
        
        .info-box a {
            color: #C8102E;
            text-decoration: underline;
        }
        
        .footer {
            background: #1f2937;
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .footer-content {
            max-width: 64rem;
            margin: 0 auto;
            padding: 0 1.5rem;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>Government of Jersey</h1>
        </div>
    </div>

    <div class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="#">Home</a> &gt; <a href="#">Taxes and your money</a> &gt; Tax residence assessment
        </div>
    </div>

    <div class="container">
        <div class="intro">
            <h2>Jersey tax residence assessment tool for individuals without prior residence status</h2>
            <p>Determine your tax residence status for Jersey income tax purposes. Your residence status determines what income you pay tax on and what allowances you receive. <strong>This does not apply to individuals whose ordinary residence has been in Jersey.</strong></p>
        </div>

        <div class="card">
            <div id="question-container"></div>
        </div>

        <div class="info-box">
            <h3>Important Information</h3>
            <ul>
                <li><span class="bullet">•</span> This tool provides guidance only. For specific advice, contact Revenue Jersey or a tax professional.</li>
                <li><span class="bullet">•</span> Double tax agreements with other jurisdictions may affect your tax position.</li>
                <li><span class="bullet">•</span> Visit  <a href="https://www.gov.je/TaxesMoney/IncomeTax/Individuals/IncomeTaxCircumstances/pages/residencyforjerseytax.aspx"> gov.je </a>  for complete residence information.</li>
            </ul>
        </div>
    </div>

    <div class="footer">
        <div class="footer-content">
            <p>&copy; <span id="year"></span> Government of Jersey. All rights reserved.</p>
        </div>
    </div>

    <script>
        (function() {
            var state = {
                step: 'initial',
                answers: {},
                result: null
            };

            var questions = {
                initial: {
                    title: 'How many days will you spend in Jersey during the calendar year?',
                    subtitle: 'This includes all visits throughout the year, including days of arrival and departure, weekends and holidays.',
                    options: [
                        { value: 'under60', title: '60 days or fewer', subtitle: '' },
                        { value: 'over60', title: '61 days or more', subtitle: '' }
                    ]
                },
                visitorUnder60: {
                    title: 'Where will you stay while in Jersey?',
                    subtitle: '',
                    options: [
                        { value: 'hotel', title: 'Hotels or guest houses only', subtitle: '' },
                        { value: 'owned', title: 'Property I own, rent or is otherwise available for my use', subtitle: 'Accommodation I own, rent or cohabitate with a partner or immediate family where I have a continued expectation to use it without pre-consent.' }
                    ]
                },
                placeOfResidence: {
                    title: 'Do you maintain a place of residence outside of Jersey?',
                    subtitle: '',
                    options: [
                        { value: 'yes', title: 'Yes - I have a home elsewhere', subtitle: 'You maintain a settled or usual place of residence outside Jersey.' },
                        { value: 'no', title: 'No - I do not have a place of residence elsewehere', subtitle: 'You have no fixed address or presence outside Jersey. For example, flight crew, cruise ship staff, humanitarian aid worker, touring artist or athlete, military personnel on overseas deployment, etc.' }
                    ]
                },
                moving: {
                    title: 'Are you moving to Jersey with the intention of living here in a settled manner?',
                    subtitle: 'This means establishing Jersey as your habitual place of residence — whether for work, to live with a partner or family, to retire, or to take an extended break from work.',
                    options: [
                        { value: 'yes', title: 'Yes - Moving to Jersey in a settled manner', subtitle: 'Relocating to the Island as a habitual place of residence.' },
                        { value: 'no', title: 'No - Living abroad but visiting or commuting for work', subtitle: 'Maintaining my place of residence elsewhere.' }
                    ]
                },
                centreOfLife: {
                    title: 'Will you be maintaining a home and life outside of Jersey while living here?',
                    subtitle: 'This means keeping a place to live (even if rented out), assets, and personal affairs in another country.',
                    options: [
                        { value: 'yes', title: 'Yes - Maintaining a life elsewhere', subtitle: 'Keeping a home and affairs outside Jersey.' },
                        { value: 'no', title: 'No - Making Jersey my only home', subtitle: 'Maintaining no other home and transferring my affairs to Jersey.' }
                    ]
                },
                durationMaintaining: {
                    title: 'How long do you plan to live in Jersey?',
                    subtitle: 'While you maintain a life outside Jersey.',
                    options: [
                        { value: 'under4years', title: '4 years or fewer', subtitle: 'Temporary stay with a defined end date within 4 years.' },
                        { value: 'over4years', title: 'More than 4 years', subtitle: 'I foresee living here for over 4 years.' }
                    ]
                },
                contract: {
                    title: 'Is your employment contract fixed-term for 4 years or fewer?',
                    subtitle: 'This applies if you\'re maintaining a life in a different country.',
                    options: [
                        { value: 'fixed', title: 'Yes - Fixed term ≤ 4 years', subtitle: 'Defined contract end date within 4 years.' },
                        { value: 'notfixed', title: 'No - Open-ended or not specified', subtitle: 'Not a fixed-term contract of 4 years or fewer.' }
                    ]
                },
                visitor: {
                    title: 'Where do you stay when visiting Jersey?',
                    subtitle: '',
                    options: [
                        { value: 'hotel', title: 'Hotels or guest houses only', subtitle: '' },
                        { value: 'owned', title: 'Property I own, rent or is otherwise available for my use', subtitle: 'Accommodation I own, rent or cohabitate with a partner or immediate family where I have a continued expectation to use it without pre-consent.' }
                    ]
                },
                nights: {
                    title: 'How many nights per year do you spend in Jersey (on average)?',
                    subtitle: 'Consider your average over a 4-year period.',
                    options: [
                        { value: 'over90', title: 'More than 90 nights per year', subtitle: 'Averaged over 4 years.' },
                        { value: 'under90', title: '90 nights or fewer per year', subtitle: 'Averaged over 4 years.' }
                    ]
                }
            };

            function handleAnswer(key, value) {
                console.log('handleAnswer called with:', key, value);
                state.answers[key] = value;
                console.log('Current state:', state);

                // Initial question - 60 days or fewer now goes to accommodation question
                if (key === 'initial' && value === 'under60') {
                    console.log('Matched: initial under60 - going to visitorUnder60');
                    state.step = 'visitorUnder60';
                    render();
                    return;
                }

                // New handler for under 60 days accommodation
                if (key === 'visitorUnder60' && value === 'hotel') {
                    console.log('Matched: visitorUnder60 hotel');
                    state.result = {
                        status: 'Non-Resident',
                        description: 'If you are employed while in Jersey you are considered a short-term business visitor and non-resident.',
                        taxLiability: 'Your Jersey-source income (such as earnings from work) is exempt from income tax, unless it accrues from Jersey property. Overseas income is also not taxable. You only need to register with Revenue Jersey if you have property income.',
                        type: 'non-resident'
                    };
                    state.step = 'result';
                    render();
                    return;
                }

                if (key === 'visitorUnder60' && value === 'owned') {
                    console.log('Matched: visitorUnder60 owned - going to placeOfResidence');
                    state.step = 'placeOfResidence';
                    render();
                    return;
                }

                // Handler for place of residence question
                if (key === 'placeOfResidence' && value === 'yes') {
                    console.log('Matched: placeOfResidence yes');
                    state.result = {
                        status: 'Resident but Not Ordinarily Resident',
                        description: 'You are resident but not ordinarily resident as you stay in available accommodation even though you spend 60 days or fewer in Jersey, while maintaining a place of residence elsewhere.',
                        taxLiability: 'Liable to Jersey income tax on all income arising in, and remitted to, Jersey.',
                        allowances: 'Allowances are apportioned for each day not spent in Jersey (excluding holidays and business trips).',
                        type: 'resident-not-ordinarily'
                    };
                    state.step = 'result';
                    render();
                    return;
                }

                if (key === 'placeOfResidence' && value === 'no') {
                    console.log('Matched: placeOfResidence no');
                    state.result = {
                        status: 'Resident and Ordinarily Resident',
                        description: 'You are resident and ordinarily resident from day one as Jersey is your only home, even though you spend 60 days or fewer in Jersey.',
                        taxLiability: 'Liable to Jersey income tax on your world-wide income regardless of where it arises. If you pay tax on the same income in another jurisdiction, a credit may be available for foreign taxes paid.',
                        type: 'resident-ordinarily'
                    };
                    state.step = 'result';
                    render();
                    return;
                }

                if (key === 'initial' && value === 'over60') {
                    state.step = 'moving';
                    render();
                    return;
                }

                if (key === 'moving' && value === 'yes') {
                    console.log('Matched: moving yes');
                    state.step = 'centreOfLife';
                    console.log('Changed step to:', state.step);
                    render();
                    console.log('Render complete');
                    return;
                }

                if (key === 'moving' && value === 'no') {
                    state.step = 'visitor';
                    render();
                    return;
                }

                if (key === 'centreOfLife' && value === 'no') {
                    state.result = {
                    status: 'Resident and Ordinarily Resident',
                    description: 'You are resident and ordinarily resident from day one as you are moving to Jersey in a permanent (though not necessarily indefinite) manner, having ceased residence elsewhere.',
                    taxLiability: 'Liable to Jersey income tax on your world-wide income regardless of where it arises. If you pay tax on the same income in another jurisdiction, a credit may be available for foreign taxes paid. Tax allowances will be apportioned based on your arrival date if part way through the year.',
                    type: 'resident-ordinarily'
                    };
                    state.step = 'result';
                    render();
                    return;
                }

                if (key === 'centreOfLife' && value === 'yes') {
                    state.step = 'durationMaintaining';
                    render();
                    return;
                }

                if (key === 'durationMaintaining' && value === 'under4years') {
                    state.step = 'contract';
                    render();
                    return;
                }

                if (key === 'durationMaintaining' && value === 'over4years') {
                    state.result = {
                        status: 'Resident and Ordinarily Resident',
                        description: 'You are resident and ordinarily resident from day one as you foresee living in Jersey for more than four years.',
                        taxLiability: 'Liable to Jersey income tax on your world-wide income regardless of where it arises. If you pay tax on the same income in another jurisdiction, a credit may be available for foreign taxes paid. Tax allowances will be apportioned based on your arrival date if part way through the year.',
                        type: 'resident-ordinarily'
                    };
                    state.step = 'result';
                    render();
                    return;
                }

                if (key === 'contract' && value === 'fixed') {
                    state.result = {
                        status: 'Resident but Not Ordinarily Resident',
                        description: 'You are resident but not ordinarily resident during the first four years, as you have a fixed-term contract of four years or fewer while maintaining a life elsewhere.',
                        taxLiability: 'You owe income tax only on Jersey-sourced income and income remitted to Jersey. If your contract extends beyond four years, you become resident and ordinarily resident from the start of year 5 or from the date of the contract change.',
                        allowances: 'Allowances are apportioned for each day not spent in Jersey (excluding holidays and business trips).',
                        type: 'resident-not-ordinarily'
                    };
                    state.step = 'result';
                    render();
                    return;
                }

                if (key === 'contract' && value === 'notfixed') {
                    state.result = {
                        status: 'Resident and Ordinarily Resident',
                        description: 'You are resident and ordinarily resident from day one.',
                        taxLiability: 'Liable to Jersey income tax on your world-wide income regardless of where it arises. If you pay tax on the same income in another jurisdiction, a credit may be available for foreign taxes paid. Tax allowances will be apportioned based on your arrival date if part way through the year.',
                        type: 'resident-ordinarily'
                    };
                    state.step = 'result';
                    render();
                    return;
                }

                if (key === 'visitor' && value === 'hotel') {
                    state.result = {
                        status: 'Non-Resident',
                        description: 'If you stay in hotels and do not exceed 60 days, you are generally not considered resident (some exceptions may apply).',
                        taxLiability: 'Your Jersey-sourced income (other than income accuring from property situated in Jersey) is exempt from income tax.',
                        type: 'non-resident'
                    };
                    state.step = 'result';
                    render();
                    return;
                }

                if (key === 'visitor' && value === 'owned') {
                    state.step = 'nights';
                    render();
                    return;
                }

                if (key === 'nights' && value === 'over90') {
                    state.result = {
                        status: 'Resident and Ordinarily Resident (from Year 5)',
                        description: 'You are treated as resident and ordinarily resident from year 5 as you average more than 90 nights per year over a 4-year period in available accommodation.',
                        taxLiability: 'From year 5 onwards, liable to Jersey income tax on your world-wide income. Before year 5, you are resident but not ordinarily resident, liable on income arising in and remitted to Jersey.',
                        type: 'resident-ordinarily'
                    };
                    state.step = 'result';
                    render();
                    return;
                }

                if (key === 'nights' && value === 'under90') {
                    state.result = {
                        status: 'Resident but Not Ordinarily Resident',
                        description: 'You are resident but not ordinarily resident as you stay in available accommodation but do not average more than 90 nights per year.',
                        taxLiability: 'Liable to income tax on all income arising in Jersey and overseas income remitted to Jersey.',
                        allowances: 'Allowances are apportioned for each day not spent in Jersey (excluding holidays and business trips).',
                        type: 'resident-not-ordinarily'
                    };
                    state.step = 'result';
                    render();
                    return;
                }
            }

            function resetQuestionnaire() {
                state = {
                    step: 'initial',
                    answers: {},
                    result: null
                };
                render();
            }

            function render() {
                var container = document.getElementById('question-container');
                
                if (state.step === 'result') {
                    var allowancesHtml = state.result.allowances ? 
                        '<h4>Allowances:</h4><p>' + state.result.allowances + '</p>' : '';
                    
                    container.innerHTML = 
                        '<div class="result-box ' + state.result.type + '">' +
                            '<div class="result-content">' +
                                '<h3>Your Tax Residence Status</h3>' +
                                '<div class="result-status">' +
                                    '<p>' + state.result.status + '</p>' +
                                '</div>' +
                                '<p style="margin-bottom: 1rem">' + state.result.description + '</p>' +
                                '<div class="result-details">' +
                                    '<h4>Tax Liability:</h4>' +
                                    '<p>' + state.result.taxLiability + '</p>' +
                                    allowancesHtml +
                                '</div>' +
                            '</div>' +
                        '</div>' +
                        '<button id="reset-btn" class="primary-button">Start New Assessment</button>';
                    
                    document.getElementById('reset-btn').addEventListener('click', resetQuestionnaire);
                    return;
                }

                var currentQuestion = questions[state.step];
                
                var html = 
                    '<div class="question-box">' +
                        '<h3>' + currentQuestion.title + '</h3>' +
                        '<p>' + currentQuestion.subtitle + '</p>' +
                    '</div>' +
                    '<div class="button-group">';

                currentQuestion.options.forEach(function(option) {
                    html += 
                        '<button class="option-button" data-step="' + state.step + '" data-value="' + option.value + '">' +
                            '<div class="option-button-title">' + option.title + '</div>' +
                            '<div class="option-button-subtitle">' + option.subtitle + '</div>' +
                        '</button>';
                });

                html += '</div>';
                container.innerHTML = html;

                var buttons = container.querySelectorAll('.option-button');
                for (var i = 0; i < buttons.length; i++) {
                    buttons[i].addEventListener('click', function(e) {
                        e.preventDefault();
                        var step = this.getAttribute('data-step');
                        var value = this.getAttribute('data-value');
                        console.log('Button clicked:', step, value);
                        handleAnswer(step, value);
                    });
                }
            }

            document.getElementById('year').textContent = new Date().getFullYear();
            console.log('Script loaded, rendering initial state...');
            render();
            console.log('Initial render complete');
        })();
    </script>
</body>
</html>
